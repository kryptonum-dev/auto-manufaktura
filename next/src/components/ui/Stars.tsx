export default function Stars({ rating, className = '' }: { rating: number; className?: string }) {
  const fullStars = Math.floor(rating);
  const rest = (fullStars + 1) % rating;
  const hasHalfStar = rest > 0 && rest < 1;

  const renderStar = (type: 'full' | 'half' | 'empty') => {
    if (type === 'half') {
      return (
        <svg
          xmlns='http://www.w3.org/2000/svg'
          width={12}
          height={12}
          fill='none'
          viewBox='0 0 12 12'
          key={Math.random()}
        >
          <path
            fill='#FFB800'
            d='M6 1c-.473 0-.79.568-1.423 1.704l-.164.294c-.18.323-.27.484-.41.59-.14.107-.316.147-.665.226l-.318.072c-1.23.278-1.845.417-1.991.888-.147.47.273.96 1.111 1.941l.217.254c.238.278.357.418.41.59.055.172.037.358 0 .73l-.032.338c-.127 1.308-.19 1.962.193 2.253.383.29.958.026 2.11-.504l.298-.138c.327-.15.49-.226.664-.226V1Z'
          />
          <path
            fill='#CBD0D0'
            d='M6 1c.473 0 .79.568 1.423 1.704l.164.294c.18.323.27.484.41.59.14.107.316.147.665.226l.318.072c1.23.278 1.845.417 1.991.888.147.47-.273.96-1.111 1.941l-.217.254c-.238.278-.357.418-.41.59-.055.172-.037.358 0 .73l.032.338c.127 1.308.19 1.962-.193 2.253-.383.29-.958.026-2.11-.504l-.298-.138c-.327-.15-.49-.226-.664-.226V1Z'
          />
        </svg>
      );
    }

    return (
      <svg
        xmlns='http://www.w3.org/2000/svg'
        width={12}
        height={12}
        fill='none'
        viewBox='0 0 12 12'
        key={Math.random()}
      >
        <path
          fill={type === 'full' ? '#FFB800' : '#CBD0D0'}
          d='M4.577 2.704C5.21 1.568 5.527 1 6 1c.473 0 .79.568 1.423 1.704l.164.294c.18.323.27.484.41.59.14.107.316.147.665.226l.318.072c1.23.278 1.845.417 1.991.888.147.47-.273.96-1.111 1.941l-.217.254c-.238.278-.357.418-.41.59-.055.172-.037.358 0 .73l.032.338c.127 1.308.19 1.962-.193 2.253-.383.29-.958.026-2.11-.504l-.298-.138c-.327-.15-.49-.226-.664-.226-.173 0-.337.076-.664.226l-.298.138c-1.152.53-1.727.795-2.11.504-.383-.29-.32-.945-.193-2.253l.032-.338c.037-.372.055-.558 0-.73-.053-.172-.172-.312-.41-.59l-.217-.254c-.838-.98-1.258-1.47-1.111-1.941.146-.47.76-.61 1.99-.888l.319-.072c.35-.08.524-.119.664-.225.14-.107.23-.268.41-.59l.165-.295Z'
        />
      </svg>
    );
  };

  return (
    <span className={className}>
      {[...Array(5)].map((_, i) =>
        renderStar(i < fullStars ? 'full' : hasHalfStar && i === fullStars ? 'half' : 'empty')
      )}
    </span>
  );
}
